<html>
  <head>
    <title>Spycam live stream</title>
    <script
      src="https://code.jquery.com/jquery-3.3.1.slim.min.js"
      integrity="sha256-3edrmyuQ0w65f8gfBsqowzjJe2iM6n0nKciPUp8y+7E="
      crossorigin="anonymous">
    </script>
    
    <style>
      body {
        margin: 0px;
      }

      #videoStream {
        width: 100vw;
      }

      #controls {
        z-index: 200;
        position: absolute;
        top: 2em;
        left: 2em;
      }
    </style>
  </head>
  <body>

    <div id="controls">
      <button type="button" onclick="wsavc.playStream()">Start Video</button>
      <button type="button" onclick="wsavc.stopStream()">Stop Video</button>
      <button type="button" onclick="wsavc.disconnect()">Disconnect</button>
    </div>

    <!-- provide WSAvcPlayer -->
    <script type="text/javascript" src="http-live-player.js">;</script>
    <script type="text/javascript">

    // Create canvas to host player in
    var canvas = document.createElement("canvas");
    canvas.id = "videoStream";
    document.body.appendChild(canvas);

    // Create h264 player
    var uri = "wss://" + document.location.host;
    var wsavc = new WSAvcPlayer(canvas, "webgl", 1, 35);
    wsavc.connect(uri, () => {
      // Start stream once websocket connects
      wsavc.playStream();
    });

    //expose instance for button callbacks
    window.wsavc = wsavc;
    </script>
  </body>
</html>